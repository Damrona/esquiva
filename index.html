<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>El Ciervo Esquiva</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            overflow: hidden;
            background-image: url('image.webp');
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
            font-family: Arial, sans-serif;
            height: 100vh;
            width: 100vw;
            position: relative;
            cursor: none;
            touch-action: manipulation;
        }
        
        #deer {
            position: absolute;
            font-size: 30px; /* Reducido para m√≥viles */
            z-index: 100;
            pointer-events: none;
            transform: translate(-50%, -50%);
        }
        
        .obstacle {
            position: absolute;
            font-size: 20px; /* Reducido para m√≥viles */
            z-index: 10;
            pointer-events: none;
            transform: translate(-50%, -50%);
        }
        
        #scoreContainer {
            position: fixed;
            top: 10px; /* Mover m√°s arriba en m√≥viles */
            left: 50%;
            transform: translateX(-50%);
            z-index: 1000;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }
        
        #scoreCircle {
            width: 60px; /* Reducido para m√≥viles */
            height: 60px; /* Reducido para m√≥viles */
            border-radius: 50%;
            position: relative;
            overflow: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.3); /* Sombra m√°s peque√±a */
        }
        
        #scoreCircle::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-image: url('imagen.jpg');
            background-size: cover;
            background-position: center;
            opacity: 0.6;
        }
        
        #scoreValue {
            font-size: 24px; /* Reducido para m√≥viles */
            font-weight: bold;
            color: white;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5); /* Sombra m√°s peque√±a */
            position: relative;
            z-index: 1;
        }
        
        .score-animation {
            animation: scoreChange 0.5s ease-in-out;
        }
        
        .circle-animation {
            animation: circlePulse 0.5s ease-in-out;
        }
        
        @keyframes scoreChange {
            0% { transform: scale(1); }
            50% { transform: scale(1.2); } /* Animaci√≥n m√°s sutil */
            100% { transform: scale(1); }
        }
        
        @keyframes circlePulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); } /* Animaci√≥n m√°s sutil */
            100% { transform: scale(1); }
        }
        
        #gameOver {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background-color: rgba(0, 0, 0, 0.8);
            color: white;
            padding: 20px; /* Reducido para m√≥viles */
            border-radius: 10px; /* Reducido para m√≥viles */
            text-align: center;
            z-index: 1000;
            display: none;
            width: 80%; /* Ancho relativo */
            max-width: 300px; /* M√°ximo ancho */
        }
        
        button {
            background-color: #4CAF50;
            border: none;
            color: white;
            padding: 10px 20px; /* Reducido para m√≥viles */
            text-align: center;
            text-decoration: none;
            font-size: 16px; /* Reducido para m√≥viles */
            margin: 10px 0; /* Reducido para m√≥viles */
            cursor: pointer;
            border-radius: 6px; /* Reducido para m√≥viles */
            transition: background-color 0.3s;
        }
        
        button:hover {
            background-color: #45a049;
        }
        
        #ground {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 15px; /* Reducido para m√≥viles */
            background-image: url('suelo.png');
            background-size: cover;
            background-position: top center;
            z-index: 5;
        }
        
        /* Estilos para la pregunta - Adaptados para m√≥viles */
        #questionContainer {
            position: fixed;
            top: 70px; /* Mover m√°s arriba en m√≥viles */
            left: 50%;
            transform: translateX(-50%);
            background-color: rgba(0, 0, 0, 0.7);
            color: white;
            padding: 15px; /* Reducido para m√≥viles */
            border-radius: 8px; /* Reducido para m√≥viles */
            text-align: center;
            z-index: 1000;
            display: none;
            width: 90%; /* Ancho relativo */
            max-width: 350px; /* M√°ximo ancho */
        }
        
        #questionText {
            font-size: 16px; /* Reducido para m√≥viles */
            margin-bottom: 15px; /* Reducido para m√≥viles */
            line-height: 1.3; /* Mejor espaciado */
        }
        
        /* Contenedor para los botones de respuesta */
        #answersContainer {
            display: flex;
            flex-direction: column; /* Apilar verticalmente en m√≥viles */
            gap: 10px; /* Espacio reducido entre botones */
            margin-top: 15px; /* Reducido para m√≥viles */
        }
        
        /* Estilo para los botones de respuesta */
        .answer-btn {
            background-color: rgba(52, 152, 219, 0.8);
            border: none;
            color: white;
            padding: 12px 15px; /* Reducido para m√≥viles */
            text-align: center;
            font-size: 14px; /* Reducido para m√≥viles */
            cursor: pointer;
            border-radius: 6px; /* Reducido para m√≥viles */
            transition: all 0.3s;
            z-index: 1000;
            display: none;
            position: relative;
            width: 100%; /* Ancho completo */
            box-sizing: border-box;
        }
        
        .answer-btn:hover {
            background-color: rgba(41, 128, 185, 0.9);
            transform: scale(1.03); /* Efecto hover m√°s sutil */
        }
        
        .deer-over-btn {
            border: 2px solid #f1c40f; /* Borde m√°s fino */
            box-shadow: 0 0 10px #f1c40f; /* Sombra m√°s peque√±a */
        }
        
        /* Estilo para el emoji de correcto */
        .correct-emoji {
            position: absolute;
            font-size: 40px; /* Reducido para m√≥viles */
            z-index: 1001;
            pointer-events: none;
            animation: fadeOut 1.5s forwards;
            transform: translate(-50%, -50%);
        }
        
        @keyframes fadeOut {
            0% { opacity: 1; transform: translate(-50%, -50%) scale(1); }
            100% { opacity: 0; transform: translate(-50%, -50%) scale(1.3); } /* Escala m√°s peque√±a */
        }
        
        /* Media query para tablets en orientaci√≥n horizontal */
        @media (min-width: 600px) and (orientation: landscape) {
            #deer {
                font-size: 35px;
            }
            
            .obstacle {
                font-size: 25px;
            }
            
            #questionContainer {
                top: 20px;
                width: 80%;
            }
            
            #answersContainer {
                flex-direction: row; /* Botones en fila en landscape */
            }
            
            .answer-btn {
                width: auto;
                padding: 10px 15px;
            }
        }
    </style>
</head>
<body>
    <div id="scoreContainer">
        <div id="scoreCircle">
            <div id="scoreValue">0</div>
        </div>
    </div>
    <div id="deer">ü¶å</div>
    <div id="ground"></div>
    
    <!-- Contenedor de pregunta -->
    <div id="questionContainer">
        <div id="questionText"></div>
        <div id="answersContainer">
            <button id="answerBtn1" class="answer-btn"></button>
            <button id="answerBtn2" class="answer-btn"></button>
        </div>
    </div>
    
    <div id="gameOver">
        <h2>Fin del juego!</h2>
        <p id="finalScore">Tu puntaje: 0</p>
        <button onclick="resetGame()">Reintentar</button>
    </div>

    <script>
        // Elementos del juego
        const deer = document.getElementById('deer');
        const scoreElement = document.getElementById('scoreValue');
        const scoreCircle = document.getElementById('scoreCircle');
        const gameOverElement = document.getElementById('gameOver');
        const finalScoreElement = document.getElementById('finalScore');
        const ground = document.getElementById('ground');
        const questionContainer = document.getElementById('questionContainer');
        const questionText = document.getElementById('questionText');
        const answerBtn1 = document.getElementById('answerBtn1');
        const answerBtn2 = document.getElementById('answerBtn2');
        
        // Variables del juego
        let score = 0;
        let gameRunning = true;
        let obstacleSpeed = 2;
        let obstacleSpawnRate = 1000;
        let obstacles = [];
        let deerX = window.innerWidth / 2;
        let deerY = window.innerHeight - 50; /* Ajustado para m√≥viles */
        const deerSize = 30; /* Reducido para m√≥viles */
        let questionActive = false;
        let correctAnswer = null;
        let questionTimer;
        
        // Tipos de obst√°culos
        const obstacleTypes = ['üå≤', 'ü™®', 'üå≥', 'üå¥', 'ü™µ'];
        
        const questions = [
            {
                question: "¬øA cu√°ntos kil√≥metros est√° el Parque Nacional Perito Moreno de Gobernador Gregores (localidad m√°s cercana)?",
                answers: ["220 kil√≥metros", "160 kil√≥metros"],
                correct: 0
            },
            {
                question: "¬øQu√© tipo de paisaje predomina en el Parque Nacional Perito Moreno?",
                answers: ["Selva tropical y playas", "Estepa, lagunas, bosques y monta√±as"],
                correct: 1
            },
            {
                question: "¬øQu√© tipo de actividades est√°n prohibidas en el Parque?",
                answers: ["Encender fuego", "Hacer senderismo"],
                correct: 0
            },
            {
                question: "¬øQu√© servicio NO ofrece el Parque Nacional?",
                answers: ["Red de senderos", "Proveedur√≠a"],
                correct: 1
            },
            {
                question: "¬øQu√© sendero permite observar restos de la Pasarela Hist√≥rica?",
                answers: ["Circuito Grande", "Sendero R√≠o Volc√°n"],
                correct: 1
            },
            {
                question: "¬øCu√°ntos d√≠as puede permanecer un visitante en un refugio?",
                answers: ["Hasta una semana", "2 o 3 noches"],
                correct: 1
            },
            {
                question: "¬øQu√© tipo de animales pueden verse en el Parque?",
                answers: ["Monos y tucanes", "C√≥ndores, choiques y huemules"],
                correct: 1
            },
            {
                question: "¬øQu√© aves en peligro de extinci√≥n pueden encontrarse en el parque?",
                answers: ["Mac√° tobiano y chorlito ceniciento", "Colibr√≠ gigante y flamenco andino"],
                correct: 0
            },
            {
                question: "¬øQu√© dificultad tiene el Circuito Azara?",
                answers: ["Baja", "Alta"],
                correct: 1
            },
            {
                question: "¬øC√≥mo se accede a los refugios del Parque?",
                answers: ["Reservando por correo con una semana de anticipaci√≥n", "Llegando sin aviso"],
                correct: 0
            },
            {
                question: "¬øCu√°l es el uso del Observatorio de aves Lagunas del Mi√©?",
                answers: ["Hacer picnic y fogatas", "Observar aves sin molestarlas"],
                correct: 1
            },
            {
                question: "¬øQu√© recomendaci√≥n se da antes de hacer senderismo?",
                answers: ["Improvisar en el momento", "Planificar seg√∫n tu experiencia f√≠sica y llevar el equipo adecuado"],
                correct: 1
            },
            {
                question: "¬øQu√© dificultad tiene el ascenso al Cerro Le√≥n?",
                answers: ["Alta", "Baja"],
                correct: 0
            },
            {
                question: "¬øD√≥nde se encuentra la Oficina de Informes 'Ceferino Fonzo'?",
                answers: ["En Gobernador Gregores", "En el Destacamento Onelli"],
                correct: 1
            },
            {
                question: "¬øCu√°l es el color caracter√≠stico del Lago Belgrano?",
                answers: ["Blanco lechoso", "Verde esmeralda"],
                correct: 0
            }
        ];
        
        // Inicializaci√≥n del juego
        initGame();
        
        function initGame() {
            updateDeerPosition();
            createObstacle();
            updateObstacles();
            startQuestionTimer();
        }
        
        // Temporizador para aparecer preguntas
        function startQuestionTimer() {
            // Aparece una pregunta cada 20-30 segundos
            const nextQuestionTime = 10000 + Math.random() * 10000;
            questionTimer = setTimeout(showQuestion, nextQuestionTime);
        }
        
        // Mostrar pregunta
        function showQuestion() {
            if (!gameRunning || questionActive) return;
            
            questionActive = true;
            pauseGame();
            
            // Seleccionar pregunta aleatoria
            const currentQuestion = questions[Math.floor(Math.random() * questions.length)];
            questionText.textContent = currentQuestion.question;
            correctAnswer = currentQuestion.correct;
            
            // Mostrar pregunta y botones
            questionContainer.style.display = 'block';
            
            // Asignar respuestas a los botones (mezcladas)
            const shuffledAnswers = [...currentQuestion.answers].sort(() => Math.random() - 0.5);
            answerBtn1.textContent = shuffledAnswers[0];
            answerBtn2.textContent = shuffledAnswers[1];
            
            // Mostrar botones
            answerBtn1.style.display = 'block';
            answerBtn2.style.display = 'block';
            
            // Habilitar el cursor para poder hacer clic
            document.body.style.cursor = 'auto';
        }
        
        // Verificar si el ciervo est√° sobre un bot√≥n
        function checkDeerOverButton() {
            if (!questionActive) return;
            
            // Verificar bot√≥n 1
            const btn1Rect = answerBtn1.getBoundingClientRect();
            const overBtn1 = (
                deerX > btn1Rect.left && 
                deerX < btn1Rect.right && 
                deerY > btn1Rect.top && 
                deerY < btn1Rect.bottom
            );
            
            // Verificar bot√≥n 2
            const btn2Rect = answerBtn2.getBoundingClientRect();
            const overBtn2 = (
                deerX > btn2Rect.left && 
                deerX < btn2Rect.right && 
                deerY > btn2Rect.top && 
                deerY < btn2Rect.bottom
            );
            
            // Aplicar estilos
            answerBtn1.classList.toggle('deer-over-btn', overBtn1);
            answerBtn2.classList.toggle('deer-over-btn', overBtn2);
        }
        
        // Mostrar emoji de correcto
        function showCorrectEmoji() {
            const emoji = document.createElement('div');
            emoji.className = 'correct-emoji';
            emoji.textContent = '‚úÖ';
            emoji.style.left = `${deerX}px`;
            emoji.style.top = `${deerY}px`;
            document.body.appendChild(emoji);
            
            // Eliminar el emoji despu√©s de la animaci√≥n
            setTimeout(() => {
                document.body.removeChild(emoji);
            }, 1500);
        }
        
        // Manejar respuesta
        function handleAnswer(btnIndex) {
            if (!questionActive) return;
            
            // Obtener el bot√≥n clickeado
            const clickedBtn = btnIndex === 0 ? answerBtn1 : answerBtn2;
            
            if (btnIndex === correctAnswer) {
                // Respuesta correcta
                score += 50;
                updateScore();
                showCorrectEmoji();
                
                // Efecto visual para el bot√≥n correcto
                clickedBtn.style.backgroundColor = '#4CAF50';
                setTimeout(() => {
                    clickedBtn.style.backgroundColor = '';
                }, 500);
            } else {
                // Respuesta incorrecta - aumentar velocidad de obst√°culos
                obstacleSpeed += 0.5;
                
                // Efecto visual para el bot√≥n incorrecto
                clickedBtn.style.backgroundColor = '#f44336';
                setTimeout(() => {
                    clickedBtn.style.backgroundColor = '';
                }, 500);
            }
            
            // Ocultar pregunta y botones
            questionContainer.style.display = 'none';
            answerBtn1.style.display = 'none';
            answerBtn2.style.display = 'none';
            answerBtn1.classList.remove('deer-over-btn');
            answerBtn2.classList.remove('deer-over-btn');
            
            // Restaurar cursor invisible
            document.body.style.cursor = 'none';
            
            questionActive = false;
            
            // Reactivar el juego
            gameRunning = true;
            createObstacle();
            updateObstacles();
            
            startQuestionTimer();
        }
        
        // Pausar el juego (para cuando aparece la pregunta)
        function pauseGame() {
            gameRunning = false;
        }
        
        // Event listeners para los botones
        answerBtn1.addEventListener('click', () => {
            const isCorrect = answerBtn1.textContent === questions.find(q => q.question === questionText.textContent).answers[correctAnswer];
            handleAnswer(isCorrect ? correctAnswer : 1 - correctAnswer);
        });
        
        answerBtn2.addEventListener('click', () => {
            const isCorrect = answerBtn2.textContent === questions.find(q => q.question === questionText.textContent).answers[correctAnswer];
            handleAnswer(isCorrect ? correctAnswer : 1 - correctAnswer);
        });
        
        // Movimiento del ciervo
        document.addEventListener('mousemove', (e) => {
            deerX = e.clientX;
            deerY = e.clientY;
            updateDeerPosition();
            checkDeerOverButton();
        });
        
        document.addEventListener('touchmove', (e) => {
            e.preventDefault();
            deerX = e.touches[0].clientX;
            deerY = e.touches[0].clientY;
            updateDeerPosition();
            checkDeerOverButton();
        }, { passive: false });
        
        function updateDeerPosition() {
            deer.style.left = `${deerX}px`;
            deer.style.top = `${deerY}px`;
        }
        
        function createObstacle() {
            if (!gameRunning) return;
            
            const type = obstacleTypes[Math.floor(Math.random() * obstacleTypes.length)];
            const size = 20 + Math.random() * 20; /* Reducido para m√≥viles */
            const x = Math.random() * (window.innerWidth - size);
            
            const obstacle = document.createElement('div');
            obstacle.className = 'obstacle';
            obstacle.textContent = type;
            obstacle.style.fontSize = `${size}px`;
            obstacle.style.left = `${x}px`;
            obstacle.style.top = `-${size}px`;
            document.body.appendChild(obstacle);
            
            obstacles.push({
                element: obstacle,
                x,
                y: -size,
                size,
                speed: obstacleSpeed + Math.random() * 1
            });
            
            setTimeout(createObstacle, obstacleSpawnRate);
        }
        
        function updateScore() {
            scoreElement.textContent = score;
            scoreElement.classList.add('score-animation');
            scoreCircle.classList.add('circle-animation');
            
            setTimeout(() => {
                scoreElement.classList.remove('score-animation');
                scoreCircle.classList.remove('circle-animation');
            }, 500);
        }
        
        function updateObstacles() {
            if (!gameRunning) return;
            
            for (let i = obstacles.length - 1; i >= 0; i--) {
                const obstacle = obstacles[i];
                obstacle.y += obstacle.speed;
                obstacle.element.style.top = `${obstacle.y}px`;
                
                if (obstacle.y > window.innerHeight) {
                    document.body.removeChild(obstacle.element);
                    obstacles.splice(i, 1);
                    score++;
                    updateScore();
                    
                    if (score % 5 === 0) {
                        obstacleSpeed += 0.3;
                        if (obstacleSpawnRate > 300) {
                            obstacleSpawnRate -= 50;
                        }
                    }
                }
                
                // Colisi√≥n con hitboxes reducidas
                const collisionDistance = (deerSize/2 * 0.8) + (obstacle.size/2 * 0.6);
                const actualDistance = Math.sqrt(
                    Math.pow(deerX - (obstacle.x + obstacle.size/2), 2) + 
                    Math.pow(deerY - (obstacle.y + obstacle.size/2), 2)
                );
                
                if (actualDistance < collisionDistance) {
                    gameOver();
                }
            }
            
            requestAnimationFrame(updateObstacles);
        }
        
        function gameOver() {
            gameRunning = false;
            finalScoreElement.textContent = `Tu puntaje: ${score}`;
            gameOverElement.style.display = 'block';
            
            // Eliminar todos los obst√°culos
            obstacles.forEach(obstacle => {
                document.body.removeChild(obstacle.element);
            });
            obstacles = [];
            
            // Cancelar temporizador de preguntas
            clearTimeout(questionTimer);
            
            // Ocultar pregunta si estaba activa
            if (questionActive) {
                questionContainer.style.display = 'none';
                answerBtn1.style.display = 'none';
                answerBtn2.style.display = 'none';
                questionActive = false;
                document.body.style.cursor = 'none';
            }
        }
        
        function resetGame() {
            score = 0;
            obstacleSpeed = 2;
            obstacleSpawnRate = 1000;
            gameRunning = true;
            updateScore();
            gameOverElement.style.display = 'none';
            
            // Restaurar cursor invisible
            document.body.style.cursor = 'none';
            
            // Iniciar bucles del juego
            createObstacle();
            updateObstacles();
            startQuestionTimer();
        }
        
        // Redimensionamiento de ventana
        window.addEventListener('resize', () => {
            deerY = Math.min(deerY, window.innerHeight - 40);
            updateDeerPosition();
        });
    </script>
</body>
</html>
